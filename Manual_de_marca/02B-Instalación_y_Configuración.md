# üíª LA RESERVA - DESARROLLO WEB
## PARTE B: Instalaci√≥n y Configuraci√≥n

**Versi√≥n:** 1.0  
**Fecha:** Octubre 2025  
**Tiempo estimado:** 30-45 minutos

---

## üìë CONTENIDO

1. Verificaci√≥n de Requisitos Previos
2. Instalaci√≥n de pnpm
3. Creaci√≥n del Proyecto Astro
4. Instalaci√≥n de Dependencias
5. Configuraci√≥n de Astro
6. Configuraci√≥n de Tailwind CSS
7. Configuraci√≥n de TypeScript
8. Variables de Entorno
9. Configuraci√≥n de Git y Prettier
10. Verificaci√≥n Final

---

## 1. VERIFICACI√ìN DE REQUISITOS PREVIOS

Antes de comenzar, verifica que tienes todo listo:

### ‚úÖ Checklist de Software

```bash
# Verificar Node.js (debe ser 18.14.1 o superior)
node --version
# Salida esperada: v18.x.x o v20.x.x

# Verificar Git
git --version
# Salida esperada: git version 2.x.x

# Verificar que NO tengas Astro instalado globalmente (no es necesario)
# Solo verificaci√≥n, no hay problema si no existe
```

### ‚úÖ Checklist de Cuentas

- [ ] Cuenta de GitHub creada
- [ ] Cuenta de Supabase creada (free tier)
- [ ] Cuenta de Vercel creada
- [ ] Cuenta de Resend creada (opcional por ahora)

---

## 2. INSTALACI√ìN DE pnpm

pnpm es m√°s r√°pido y eficiente que npm. Lo usaremos en todo el proyecto.

```bash
# Instalar pnpm globalmente
npm install -g pnpm

# Verificar instalaci√≥n
pnpm --version
# Salida esperada: 8.x.x o superior

# (Opcional) Configurar pnpm para usar shamefully-hoist si tienes problemas
pnpm config set shamefully-hoist true
```

**¬øPor qu√© pnpm?**
- ‚ö° 3x m√°s r√°pido que npm
- üíæ Ahorra espacio en disco (80% menos)
- üîí M√°s seguro por defecto
- üöÄ Perfecto para monorepos

---

## 3. CREACI√ìN DEL PROYECTO ASTRO

### Paso 3.1: Crear el proyecto

```bash
# Navega a la carpeta donde quieres crear el proyecto
cd ~/proyectos  # O donde prefieras

# Crear proyecto con pnpm
pnpm create astro@latest la-reserva

# Durante la instalaci√≥n, selecciona:
# ‚îå  astro   Launch sequence initiated.
# ‚îÇ
# ‚óÜ  How would you like to start your new project?
# ‚îÇ  ‚óã Use blog template
# ‚îÇ  ‚óã Use documentation template
# ‚îÇ  ‚óè Empty  ‚Üê SELECCIONA ESTA
# ‚îÇ
# ‚óÜ  Install dependencies?
# ‚îÇ  ‚óè Yes (recommended)  ‚Üê SELECCIONA ESTA
# ‚îÇ
# ‚óÜ  Do you plan to write TypeScript?
# ‚îÇ  ‚óè Yes  ‚Üê SELECCIONA ESTA
# ‚îÇ
# ‚óÜ  How strict should TypeScript be?
# ‚îÇ  ‚óã Relaxed
# ‚îÇ  ‚óè Strict  ‚Üê SELECCIONA ESTA
# ‚îÇ
# ‚óÜ  Initialize a new git repository?
# ‚îÇ  ‚óè Yes  ‚Üê SELECCIONA ESTA
```

### Paso 3.2: Entrar al proyecto

```bash
cd la-reserva

# Verificar estructura inicial
ls -la
# Deber√≠as ver: astro.config.mjs, package.json, tsconfig.json, src/, public/
```

---

## 4. INSTALACI√ìN DE DEPENDENCIAS

Instalaremos todas las librer√≠as necesarias para el proyecto.

### 4.1 Dependencias de Producci√≥n

```bash
# React y tipos
pnpm add react react-dom
pnpm add -D @types/react @types/react-dom

# Astro integrations
pnpm add @astrojs/react @astrojs/tailwind

# Tailwind CSS y plugins
pnpm add tailwindcss @tailwindcss/typography @tailwindcss/forms
pnpm add -D prettier prettier-plugin-astro prettier-plugin-tailwindcss

# Supabase
pnpm add @supabase/supabase-js

# Forms y validaci√≥n
pnpm add react-hook-form zod @hookform/resolvers

# UI Components
pnpm add @radix-ui/react-dialog @radix-ui/react-dropdown-menu
pnpm add @radix-ui/react-select @radix-ui/react-toast
pnpm add @radix-ui/react-tabs @radix-ui/react-label
pnpm add @radix-ui/react-avatar @radix-ui/react-tooltip

# Animaciones
pnpm add framer-motion

# Calendario
pnpm add react-big-calendar
pnpm add date-fns

# Iconos
pnpm add lucide-react

# Utilidades
pnpm add clsx tailwind-merge
pnpm add nanoid

# Emails (Resend)
pnpm add resend

# (Opcional) Maps
pnpm add @vis.gl/react-google-maps
```

### 4.2 Dependencias de Desarrollo

```bash
# TypeScript utilities
pnpm add -D typescript

# Astro specific
pnpm add -D astro-compress astro-seo

# PostCSS (necesario para Tailwind)
pnpm add -D postcss autoprefixer
```

### 4.3 Verificar instalaci√≥n

```bash
# Ver el archivo package.json
cat package.json

# Deber√≠as ver todas las dependencias listadas
```

---

## 5. CONFIGURACI√ìN DE ASTRO

### 5.1 Configurar integraciones

Edita `astro.config.mjs`:

```javascript
// astro.config.mjs
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';
import tailwind from '@astrojs/tailwind';

export default defineConfig({
  // Integraciones
  integrations: [
    react(),
    tailwind({
      // Aplicar estilos base de Tailwind
      applyBaseStyles: false, // Lo haremos manualmente para m√°s control
    }),
  ],

  // Output est√°tico por defecto (SSG)
  output: 'static',

  // Build configuration
  build: {
    inlineStylesheets: 'auto',
  },

  // Server configuration (para desarrollo)
  server: {
    port: 3000,
    host: true, // Permite acceso desde red local
  },

  // Vite configuration
  vite: {
    optimizeDeps: {
      exclude: ['@supabase/supabase-js'],
    },
  },

  // Experimental features
  experimental: {
    contentCollectionCache: true,
  },
});
```

### 5.2 Configurar rutas

Crea el archivo `src/env.d.ts` (si no existe):

```typescript
/// <reference types="astro/client" />

interface ImportMetaEnv {
  readonly SUPABASE_URL: string;
  readonly SUPABASE_ANON_KEY: string;
  readonly PUBLIC_SITE_URL: string;
  readonly RESEND_API_KEY: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

---

## 6. CONFIGURACI√ìN DE TAILWIND CSS

### 6.1 Generar archivo de configuraci√≥n

```bash
# Crear archivo de configuraci√≥n de Tailwind
pnpx tailwindcss init
```

### 6.2 Configurar Tailwind

Edita `tailwind.config.mjs`:

```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: ['./src/**/*.{astro,html,js,jsx,md,mdx,svelte,ts,tsx,vue}'],
  theme: {
    extend: {
      colors: {
        // Colores de La Reserva
        primary: {
          50: '#FEF9E7',
          100: '#FDF3D0',
          200: '#FAE7A1',
          300: '#F7DB72',
          400: '#F4CF43',
          500: '#D4AF37', // Dorado principal
          600: '#B8941F',
          700: '#8A6F17',
          800: '#5C4A0F',
          900: '#2E2508',
        },
        secondary: {
          50: '#F5F5F5',
          100: '#E5E5E5',
          200: '#CCCCCC',
          300: '#B3B3B3',
          400: '#999999',
          500: '#2D2D2D',
          600: '#1A1A1A', // Negro principal
          700: '#0D0D0D',
          800: '#000000',
          900: '#000000',
        },
        accent: {
          DEFAULT: '#F59E0B',
          50: '#FEF3E2',
          100: '#FDE8C5',
          200: '#FBD18B',
          300: '#F9BA51',
          400: '#F7A317',
          500: '#F59E0B',
          600: '#C47E09',
          700: '#935F07',
          800: '#623F04',
          900: '#312002',
        },
      },
      fontFamily: {
        display: ['Playfair Display', 'Georgia', 'serif'],
        body: ['Montserrat', 'system-ui', 'sans-serif'],
      },
      fontSize: {
        'hero': ['4.5rem', { lineHeight: '1.2', letterSpacing: '0.08em' }],
        'display': ['3rem', { lineHeight: '1.2', letterSpacing: '0.06em' }],
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem',
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.5s ease-out',
        'slide-down': 'slideDown 0.5s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(20px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
        slideDown: {
          '0%': { transform: 'translateY(-20px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
      },
    },
  },
  plugins: [
    require('@tailwindcss/typography'),
    require('@tailwindcss/forms'),
  ],
};
```

### 6.3 Crear archivo CSS global

Crea `src/styles/global.css`:

```css
/* src/styles/global.css */

/* Import Tailwind base, components, utilities */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;900&family=Montserrat:wght@300;400;500;600;700&display=swap');

/* Base styles */
@layer base {
  html {
    @apply scroll-smooth;
  }

  body {
    @apply font-body text-secondary-500 bg-white antialiased;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display text-secondary-600;
  }

  h1 {
    @apply text-5xl md:text-6xl lg:text-hero font-bold tracking-wider;
  }

  h2 {
    @apply text-3xl md:text-4xl lg:text-display font-semibold tracking-wide;
  }

  h3 {
    @apply text-2xl md:text-3xl font-bold;
  }

  h4 {
    @apply text-xl md:text-2xl font-bold;
  }

  p {
    @apply leading-relaxed;
  }

  a {
    @apply transition-colors duration-200;
  }
}

/* Component utilities */
@layer components {
  .section {
    @apply py-16 md:py-24 lg:py-32;
  }

  .container-custom {
    @apply container mx-auto px-4 md:px-6 lg:px-8 max-w-7xl;
  }

  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 font-semibold 
           rounded-full transition-all duration-200 uppercase tracking-wider 
           text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-gradient-to-r from-primary-500 to-accent-500 
           text-secondary-600 hover:from-primary-600 hover:to-accent-600 
           shadow-lg hover:shadow-xl;
  }

  .btn-secondary {
    @apply btn bg-transparent border-2 border-primary-500 
           text-primary-500 hover:bg-primary-500 hover:text-secondary-600;
  }

  .btn-outline {
    @apply btn bg-transparent border-2 border-white 
           text-white hover:bg-white hover:text-secondary-600;
  }

  .card {
    @apply bg-white rounded-lg shadow-md hover:shadow-xl 
           transition-shadow duration-300 overflow-hidden;
  }

  .input {
    @apply w-full px-4 py-3 border border-secondary-200 
           rounded-lg focus:outline-none focus:ring-2 
           focus:ring-primary-500 focus:border-transparent 
           transition-all duration-200;
  }

  .label {
    @apply block text-sm font-semibold text-secondary-600 mb-2;
  }

  .hero-section {
    @apply relative min-h-screen flex items-center justify-center 
           bg-secondary-600 text-white overflow-hidden;
  }

  .overlay {
    @apply absolute inset-0 bg-black bg-opacity-60;
  }
}

/* Utility classes */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .text-gradient {
    @apply bg-gradient-to-r from-primary-500 to-accent-500 
           bg-clip-text text-transparent;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* Custom animations */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(
    to right,
    transparent 0%,
    rgba(212, 175, 55, 0.3) 50%,
    transparent 100%
  );
  background-size: 1000px 100%;
}
```

---

## 7. CONFIGURACI√ìN DE TYPESCRIPT

El archivo `tsconfig.json` ya existe, pero lo mejoraremos:

```json
{
  "extends": "astro/tsconfigs/strict",
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "react",
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@layouts/*": ["src/layouts/*"],
      "@lib/*": ["src/lib/*"],
      "@utils/*": ["src/utils/*"],
      "@types/*": ["src/types/*"],
      "@styles/*": ["src/styles/*"]
    },
    "strict": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

---

## 8. VARIABLES DE ENTORNO

### 8.1 Crear archivos de entorno

```bash
# Crear archivo .env para desarrollo
touch .env

# Crear archivo de ejemplo para el equipo
touch .env.example
```

### 8.2 Configurar `.env`

```env
# .env (NO SUBIR A GIT)

# Supabase
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_ANON_KEY=tu-clave-anonima-aqui
SUPABASE_SERVICE_KEY=tu-clave-de-servicio-aqui

# Site
PUBLIC_SITE_URL=http://localhost:3000

# Resend (Emails)
RESEND_API_KEY=re_tu_api_key_aqui

# WhatsApp Business API (Opcional)
WHATSAPP_BUSINESS_ID=tu-business-id
WHATSAPP_ACCESS_TOKEN=tu-access-token

# Google Maps (Opcional)
PUBLIC_GOOGLE_MAPS_API_KEY=tu-api-key-aqui
```

### 8.3 Configurar `.env.example`

```env
# .env.example (S√ç SUBIR A GIT como plantilla)

# Supabase
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_ANON_KEY=tu-clave-anonima
SUPABASE_SERVICE_KEY=tu-clave-de-servicio

# Site
PUBLIC_SITE_URL=http://localhost:3000

# Resend (Emails)
RESEND_API_KEY=re_xxxxxxxxxxxx

# WhatsApp Business API
WHATSAPP_BUSINESS_ID=
WHATSAPP_ACCESS_TOKEN=

# Google Maps
PUBLIC_GOOGLE_MAPS_API_KEY=
```

### 8.4 Actualizar `.gitignore`

```bash
# Agregar al .gitignore (si no existe)
echo ".env" >> .gitignore
echo "node_modules/" >> .gitignore
echo "dist/" >> .gitignore
echo ".DS_Store" >> .gitignore
echo ".vercel" >> .gitignore
```

---

## 9. CONFIGURACI√ìN DE GIT Y PRETTIER

### 9.1 Configurar Prettier

Crea `.prettierrc`:

```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 80,
  "plugins": ["prettier-plugin-astro", "prettier-plugin-tailwindcss"],
  "overrides": [
    {
      "files": "*.astro",
      "options": {
        "parser": "astro"
      }
    }
  ]
}
```

Crea `.prettierignore`:

```css
node_modules/
dist/
.astro/
pnpm-lock.yaml
package-lock.json
```

### 9.2 Configurar Git

```bash
# Inicializar repositorio (si no se hizo autom√°ticamente)
git init

# Configurar usuario (si no est√° configurado globalmente)
git config user.name "Tu Nombre"
git config user.email "tu@email.com"

# Agregar todos los archivos
git add .

# Primer commit
git commit -m "üéâ Initial setup: Astro + React + Tailwind + Supabase"

# (Opcional) Conectar con GitHub
# Crea un repositorio en GitHub primero, luego:
git remote add origin https://github.com/tu-usuario/la-reserva.git
git branch -M main
git push -u origin main
```

### 9.3 Scripts √∫tiles en `package.json`

Agrega estos scripts a tu `package.json`:

```json
{
  "scripts": {
    "dev": "astro dev",
    "start": "astro dev",
    "build": "astro build",
    "preview": "astro preview",
    "astro": "astro",
    "format": "prettier --write .",
    "format:check": "prettier --check .",
    "type-check": "tsc --noEmit"
  }
}
```

---

## 10. VERIFICACI√ìN FINAL

### 10.1 Probar el servidor de desarrollo

```bash
# Iniciar servidor
pnpm dev

# Deber√≠as ver:
# üöÄ  astro  v4.x.x started in XXXms
# 
# ‚îÉ Local    http://localhost:3000/
# ‚îÉ Network  http://192.168.x.x:3000/
```

### 10.2 Abrir en navegador

Abre `http://localhost:3000` en tu navegador. Deber√≠as ver la p√°gina de inicio de Astro.

### 10.3 Verificar configuraci√≥n

```bash
# Verificar que TypeScript funciona
pnpm type-check
# No deber√≠a haber errores

# Verificar que Prettier funciona
pnpm format:check
# Deber√≠a decir "All matched files use Prettier code style!"
```

### 10.4 Estructura de proyecto final

Tu proyecto deber√≠a verse as√≠:

```css
la-reserva/
‚îú‚îÄ‚îÄ node_modules/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ favicon.svg
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ env.d.ts
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.astro
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îî‚îÄ‚îÄ global.css
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .prettierrc
‚îú‚îÄ‚îÄ .prettierignore
‚îú‚îÄ‚îÄ astro.config.mjs
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ pnpm-lock.yaml
‚îú‚îÄ‚îÄ tailwind.config.mjs
‚îî‚îÄ‚îÄ tsconfig.json
```

---

## ‚úÖ CHECKLIST DE COMPLETITUD

Antes de continuar al siguiente archivo (02C), verifica:

### Software y herramientas:
- [ ] Node.js 18+ instalado y funcionando
- [ ] pnpm instalado globalmente
- [ ] Git configurado correctamente
- [ ] VS Code con extensiones instaladas

### Proyecto:
- [ ] Proyecto Astro creado
- [ ] Todas las dependencias instaladas sin errores
- [ ] Archivos de configuraci√≥n creados y configurados:
  - [ ] `astro.config.mjs`
  - [ ] `tailwind.config.mjs`
  - [ ] `tsconfig.json`
  - [ ] `.prettierrc`
  - [ ] `.env` y `.env.example`
- [ ] Estilos globales creados (`src/styles/global.css`)
- [ ] Git inicializado y primer commit realizado
- [ ] Servidor de desarrollo funciona (`pnpm dev`)
- [ ] No hay errores de TypeScript (`pnpm type-check`)

### Cuentas configuradas:
- [ ] Supabase: proyecto creado, credenciales en `.env`
- [ ] Vercel: cuenta creada (configuraci√≥n en fase de deploy)
- [ ] Resend: cuenta creada, API key en `.env`
- [ ] GitHub: repositorio creado y conectado

---

## üêõ SOLUCI√ìN DE PROBLEMAS COMUNES

### Error: "Cannot find module 'astro'"

```bash
# Soluci√≥n: Reinstalar dependencias
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### Error: "Port 3000 is already in use"

```bash
# Soluci√≥n: Cambiar puerto en astro.config.mjs
server: {
  port: 3001, // o cualquier otro puerto libre
}
```

### Error: Tailwind no aplica estilos

```bash
# Soluci√≥n: Verificar que global.css est√© importado
# En src/pages/index.astro, agrega:
---
import '../styles/global.css';
---
```

### Error: Variables de entorno no se leen

```bash
# Soluci√≥n: Reiniciar servidor despu√©s de cambiar .env
# Ctrl+C para detener
pnpm dev  # Iniciar de nuevo
```

### Error: TypeScript arroja errores en archivos .astro

```bash
# Soluci√≥n: Instalar extensi√≥n de Astro en VS Code
# Buscar: "Astro" en el marketplace de extensiones
```

---

## üöÄ PR√ìXIMOS PASOS

Una vez completado este archivo, contin√∫a con:

**02C - Estructura y Estilos**
- Crear estructura completa de carpetas
- Configurar layouts base
- Crear componentes reutilizables

---

## üìû SOPORTE

Si encuentras problemas:
1. Revisa la secci√≥n de Soluci√≥n de Problemas
2. Consulta la documentaci√≥n oficial de Astro: https://docs.astro.build
3. Pregunta al equipo de desarrollo

---

**¬© 2025 La Reserva. Documentaci√≥n t√©cnica del proyecto.**